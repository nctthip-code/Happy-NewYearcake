<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>To Cake ğŸ†</title>
<style>
html,body{
  margin:0;
  padding:0;
  background:black;
  overflow:hidden;
  height:100%;
}
#msg{
  position:fixed;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  color:white;
  font-size:28px;
  font-family:sans-serif;
  text-align:center;
  z-index:10;
}
button{
  margin-top:20px;
  font-size:22px;
  padding:12px 25px;
  border-radius:30px;
  border:none;
  background:#ff4d8d;
  color:white;
}
canvas{position:fixed;top:0;left:0;}
  fireText{
  position:fixed;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%) scale(0.5);
  color:#ff7eb9;
  font-size:36px;
  font-weight:bold;
  text-align:center;
  opacity:0;
  pointer-events:none;
  animation: popText 2s ease-out forwards;
  text-shadow: 0 0 10px #ff4d8d;
}

@keyframes popText{
  0%{opacity:0; transform:translate(-50%,-50%) scale(0.3);}
  50%{opacity:1; transform:translate(-50%,-50%) scale(1.2);}
  100%{opacity:1; transform:translate(-50%,-50%) scale(1);}
}
</style>
</head>
<body>

<div id="msg">
  âœ¨ ğŸ’– Happy New Year cakeğŸ°ğŸ‰âœ¨<br>
  <button onclick="start()">ğŸ† à¸à¸”à¹€à¸à¸·à¹ˆà¸­à¹€à¸£à¸´à¹ˆà¸¡ ğŸ¶</button>
</div>

<audio id="music" src="music.mp3"></audio>
<canvas id="c"></canvas>
  <div id="fireText">ğŸ’– à¸ªà¸¸à¸‚à¸ªà¸±à¸™à¸•à¹Œà¸§à¸±à¸™à¸›à¸µà¹ƒà¸«à¸¡à¹ˆà¸™à¹‰à¸²à¹€à¸„à¹‰à¸ğŸ°ğŸ‰ ğŸ’–<br>à¸£à¸±à¸à¸™à¸°à¸­à¸¢à¸¹à¹ˆà¸”à¹‰à¸§à¸¢à¸à¸±à¸™à¹„à¸›à¸™à¸²à¸™à¹†ğŸ˜˜ğŸ˜ ğŸ’•</div>

<script>
const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d");
resize();
window.onresize = resize;

function resize(){
  canvas.width = innerWidth;
  canvas.height = innerHeight;
}

let hearts = [];

function start(){
  const music = document.getElementById("music");
  music.play().catch(()=>{}); // à¸à¸±à¸™ error à¸¡à¸·à¸­à¸–à¸·à¸­
  document.getElementById("msg").style.display="none";
  setInterval(createHeartFirework,700);
  requestAnimationFrame(loop);
}

function createHeartFirework(){
  let cx = Math.random() * canvas.width;
  let cy = Math.random() * canvas.height/2;

  for(let t=0; t<Math.PI*2; t+=0.15){
    let x = 16 * Math.pow(Math.sin(t),3);
    let y = -(13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t));
    hearts.push({
      x: cx,
      y: cy,
      vx: x * 0.4,
      vy: y * 0.4,
      life: 100,
      color: `hsl(${Math.random()*360},100%,70%)`
    });
  }
}

function loop(){
  ctx.fillStyle="rgba(0,0,0,0.25)";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  hearts.forEach(h=>{
    h.x += h.vx;
    h.y += h.vy;
    h.vy += 0.03;
    h.life--;
    ctx.fillStyle = h.color;
    ctx.beginPath();
    ctx.arc(h.x,h.y,3,0,Math.PI*2);
    ctx.fill();
  });

  hearts = hearts.filter(h=>h.life>0);
  requestAnimationFrame(loop);
}
</script>
</body>
</html>
